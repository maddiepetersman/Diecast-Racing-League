<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
	$(document).ready(function () {
		$("#startButton").on("click", function (e) {
			e.preventDefault(); // Prevent default form submission if inside a form
			$.ajax({
				url: "/ajax_trigger",
				type: "POST", // or 'POST' depending on your Flask route
				success: function (response) {
					console.log(response); // Handle the response from Flask
				},
				error: function (error) {
					console.error("Error:", error);
				},
			});
		});
	});
</script>

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Race Timer</title>
		<link rel="stylesheet" href="static/styles/style.css" />
	</head>
	<body>
		<div class="container">
			<div class="timer-circle" id="timerCircle">
				<img src="sportscar.png" alt="Race Car" class="car-image" />
				<div class="car-info">
					<h2 class="car-name">Speedster GT</h2>
					<p class="team-name">Lightning Racing</p>
				</div>
				<div class="time" id="time">0000 ms</div>
			</div>

			<div class="controls">
				<button id="startButton">Start</button>
				<button id="resetButton">Reset</button>
			</div>
		</div>

		<script>
			const timeDisplay = document.getElementById("time");
			const timerCircle = document.getElementById("timerCircle");
			const startButton = document.getElementById("startButton");
			const resetButton = document.getElementById("resetButton");

			let startTime, timerInterval;

			// Start button
			startButton.addEventListener("click", () => {
				timerCircle.classList.add("active");
				startTime = Date.now();
				clearInterval(timerInterval);
				timerInterval = setInterval(() => {
					const elapsed = Date.now() - startTime;
					timeDisplay.textContent = `${elapsed} ms`;
				}, 10);
			});

			// Reset button
			resetButton.addEventListener("click", () => {
				clearInterval(timerInterval);
				timeDisplay.textContent = "0000 ms";
				timerCircle.classList.remove("active");
			});
		</script>
	</body>
</html>
